var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,r=0;f>r;r+=1)u[r]=str(r,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,r=0;f>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,p),o&&u.push(quote(n)+(gap?": ":":")+o));else for(n in p)Object.prototype.hasOwnProperty.call(p,n)&&(o=str(n,p),o&&u.push(quote(n)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
!function(n,t){function e(n){return n&&n.__wrapped__?n:this instanceof e?void(this.__wrapped__=n):new e(n)}function r(n,t,e){t||(t=0);var r=n.length,u=r-t>=(e||rt),a=u?{}:n;if(u)for(var o=t-1;++o<r;){var i=n[o]+"";(wt.call(a,i)?a[i]:a[i]=[]).push(n[o])}return function(n){if(u){var e=n+"";return wt.call(a,e)&&ln(a[e],n)>-1}return ln(a,n,t)>-1}}function u(n,e){var r=n.index,u=e.index;if(n=n.criteria,e=e.criteria,n!==e){if(n>e||n===t)return 1;if(e>n||e===t)return-1}return u>r?-1:1}function a(n,t,e){function r(){var i=arguments,c=a?this:t;if(u||(n=t[o]),e.length&&(i=i.length?e.concat(At.call(i)):e),this instanceof r){f.prototype=n.prototype,c=new f;var l=n.apply(c,i);return l&&ne[typeof l]?l:c}return n.apply(c,i)}var u=A(n),a=!e,o=n;return a&&(e=t),r}function o(n,e){return n?"function"!=typeof n?function(t){return t[n]}:e!==t?function(t,r,u){return n.call(e,t,r,u)}:n:Tn}function i(){for(var n,t={arrayLoop:"",bottom:"",hasDontEnumBug:Xn,isKeysFast:Xt,objectLoop:"",noArgsEnum:zt,noCharByIndex:Gt,shadowed:yt,top:"",useHas:!0},e=0;n=arguments[e];e++)for(var r in n)t[r]=n[r];var u=t.args;t.firstArg=/^[^,]+/.exec(u)[0];var a=Function("createCallback, hasOwnProperty, isArguments, objectTypes, nativeKeys, propertyIsEnumerable, stringClass, toString","return function("+u+") {\n"+ee(t)+"\n}");return a(o,wt,p,ne,Bt,Et,Mt,Ot)}function c(n){return"\\"+te[n]}function l(n){return ce[n]}function f(){}function s(n){return le[n]}function p(n){return Ot.call(n)==$t}function g(n){var t=!1;if(!n||"object"!=typeof n||p(n))return t;var e=n.constructor;return Jt&&"function"!=typeof n.toString&&"string"==typeof(n+"")||A(e)&&!(e instanceof e)?t:Yn?(oe(n,function(n,e,r){return t=!wt.call(r,e),!1}),t===!1):(oe(n,function(n,e){t=e}),t===!1||wt.call(n,t))}function v(n){var t=[];return ie(n,function(n,e){t.push(e)}),t}function h(n,t,e,r,u){if(null==n)return n;e&&(t=!1);var a=ne[typeof n];if(a){var o=Ot.call(n);if(!Zt[o]||Ut&&p(n))return n;var i=o==Ft;a=i||(o==qt?ge(n):a)}if(!a||!t)return a?i?At.call(n):se({},n):n;var c=n.constructor;switch(o){case Tt:case Rt:return new c(+n);case Ct:case Mt:return new c(n);case Nt:return c(n.source,ft.exec(n))}r||(r=[]),u||(u=[]);for(var l=r.length;l--;)if(r[l]==n)return u[l];var f=i?c(n.length):{};return r.push(n),u.push(f),(i?he:ie)(n,function(n,e){f[e]=h(n,t,null,r,u)}),f}function y(n){var t=[];return oe(n,function(n,e){A(n)&&t.push(e)}),t.sort()}function _(n,t){return n?wt.call(n,t):!1}function m(n){var t={};return ie(n,function(n,e){t[n]=e}),t}function d(n){return n===!0||n===!1||Ot.call(n)==Tt}function b(n){return Ot.call(n)==Rt}function x(n){return n?1===n.nodeType:!1}function w(n){var t=!0;if(!n)return t;var e=Ot.call(n),r=n.length;return e==Ft||e==Mt||e==$t||Ut&&p(n)||e==qt&&"number"==typeof r&&A(n.splice)?!r:(ie(n,function(){return t=!1}),t)}function j(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;var u=Ot.call(n);if(u!=Ot.call(t))return!1;switch(u){case Tt:case Rt:return+n==+t;case Ct:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Nt:case Mt:return n==t+""}var a=u==Ft||u==$t;if(Ut&&!a&&(a=p(n))&&!p(t))return!1;if(!a){if(n.__wrapped__||t.__wrapped__)return j(n.__wrapped__||n,t.__wrapped__||t);if(u!=qt||Jt&&("function"!=typeof n.toString&&"string"==typeof(n+"")||"function"!=typeof t.toString&&"string"==typeof(t+"")))return!1;var o=n.constructor,i=t.constructor;if(o!=i&&!(A(o)&&o instanceof o&&A(i)&&i instanceof i))return!1}e||(e=[]),r||(r=[]);for(var c=e.length;c--;)if(e[c]==n)return r[c]==t;var l=-1,f=!0,s=0;if(e.push(n),r.push(t),a){if(s=n.length,f=s==t.length)for(;s--&&(f=j(n[s],t[s],e,r)););return f}for(var g in n)if(wt.call(n,g)&&(s++,!wt.call(t,g)||!j(n[g],t[g],e,r)))return!1;for(g in t)if(wt.call(t,g)&&!s--)return!1;if(Xn)for(;++l<7;)if(g=yt[l],wt.call(n,g)&&(!wt.call(t,g)||!j(n[g],t[g],e,r)))return!1;return!0}function E(n){return It(n?+n:parseFloat(n))}function A(n){return"function"==typeof n}function O(n){return n?ne[typeof n]:!1}function k(n){return Ot.call(n)==Ct&&n!=+n}function L(n){return null===n}function I(n){return Ot.call(n)==Ct}function B(n){return Ot.call(n)==Nt}function S(n){return Ot.call(n)==Mt}function D(n){return n===t}function P(n,t,e){var r=arguments,u=0,a=2,o=r[3],i=r[4];for(e!==et&&(o=[],i=[],a=r.length);++u<a;)ie(r[u],function(t,e){var r,u,a;if(t&&((u=pe(t))||ge(t))){for(var c=o.length;c--&&!(r=o[c]==t););r?n[e]=i[c]:(o.push(t),i.push((a=n[e],a=u?pe(a)?a:[]:ge(a)?a:{})),n[e]=P(a,t,et,o,i))}else null!=t&&(n[e]=t)});return n}function $(n,t,e){var r="function"==typeof t,u={};if(r)t=o(t,e);else var a=dt.apply(Zn,arguments);return oe(n,function(n,e,o){(r?!t(n,e,o):ln(a,e,1)<0)&&(u[e]=n)}),u}function F(n){var t=[];return ie(n,function(n,e){t.push([e,n])}),t}function T(n,t,e){var r={};if("function"!=typeof t)for(var u=0,a=dt.apply(Zn,arguments),i=a.length;++u<i;){var c=a[u];c in n&&(r[c]=n[c])}else t=o(t,e),oe(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r}function R(n){var t=[];return ie(n,function(n){t.push(n)}),t}function H(n,t){var e=n?n.length:0;return"number"==typeof e?(Ot.call(n)==Mt?n.indexOf(t):ln(n,t))>-1:nn(n,function(n){return n===t})}function C(n,t,e){var r={};return t=o(t,e),he(n,function(n,e,u){e=t(n,e,u),wt.call(r,e)?r[e]++:r[e]=1}),r}function q(n,t,e){var r=!0;return t=o(t,e),he(n,function(n,e,u){return r=t(n,e,u)}),!!r}function N(n,t,e){var r=[];return t=o(t,e),he(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function M(n,t,e){var r;return t=o(t,e),nn(n,function(n,e,u){return t(n,e,u)&&(r=n,!0)}),r}function K(n,t,e){var r={};return t=o(t,e),he(n,function(n,e,u){e=t(n,e,u),(wt.call(r,e)?r[e]:r[e]=[]).push(n)}),r}function z(n,t){var e=At.call(arguments,2),r="function"==typeof t,u=[];return he(n,function(n){u.push((r?t:n[t]).apply(n,e))}),u}function U(n,t,e){var r=-1,u=n?n.length:0,a=Array("number"==typeof u?u:0);if(t=o(t,e),pe(n))for(;++r<u;)a[r]=t(n[r],r,n);else he(n,function(n,e,u){a[++r]=t(n,e,u)});return a}function V(n,t,e){var r=-(1/0),u=-1,a=n?n.length:0,i=r;if(t||"number"!=typeof a)t=o(t,e),he(n,function(n,e,u){var a=t(n,e,u);a>r&&(r=a,i=n)});else for(;++u<a;)n[u]>i&&(i=n[u]);return i}function G(n,t,e){var r=1/0,u=-1,a=n?n.length:0,i=r;if(t||"number"!=typeof a)t=o(t,e),he(n,function(n,e,u){var a=t(n,e,u);r>a&&(r=a,i=n)});else for(;++u<a;)n[u]<i&&(i=n[u]);return i}function J(n,t){var e=[];return he(n,function(n){e.push(n[t])}),e}function Q(n,t,e,r){var u=arguments.length<3;return t=o(t,r),he(n,function(n,r,a){e=u?(u=!1,n):t(e,n,r,a)}),e}function W(n,t,e,r){var u=n,a=n?n.length:0,o=arguments.length<3;if("number"!=typeof a){var i=ve(n);a=i.length}else Gt&&Ot.call(n)==Mt&&(u=n.split(""));return he(n,function(n,c,l){c=i?i[--a]:--a,e=o?(o=!1,u[c]):t.call(r,e,u[c],c,l)}),e}function X(n,t,e){return t=o(t,e),N(n,function(n,e,r){return!t(n,e,r)})}function Y(n){var t=-1,e=Array(n?n.length:0);return he(n,function(n){var r=bt(Pt()*(++t+1));e[t]=e[r],e[r]=n}),e}function Z(n){var t=n?n.length:0;return"number"==typeof t?t:ve(n).length}function nn(n,t,e){var r;return t=o(t,e),he(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function tn(n,t,e){var r=[];t=o(t,e),he(n,function(n,e,u){r.push({criteria:t(n,e,u),index:e,value:n})});var a=r.length;for(r.sort(u);a--;)r[a]=r[a].value;return r}function en(n){return n&&"number"==typeof n.length?(Vt?Ot.call(n)==Mt:"string"==typeof n)?n.split(""):At.call(n):R(n)}function rn(n,t){var e=[];return oe(t,function(n,t){e.push(t)}),N(n,function(n){for(var r=e.length;r--;){var u=n[e[r]]===t[e[r]];if(!u)break}return!!u})}function un(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r}function an(n){for(var t=-1,e=n?n.length:0,u=dt.apply(Zn,arguments),a=r(u,e),o=[];++t<e;){var i=n[t];a(i)||o.push(i)}return o}function on(n,t,e){return n?null==t||e?n[0]:At.call(n,0,t):void 0}function cn(n,t){for(var e=-1,r=n?n.length:0,u=[];++e<r;){var a=n[e];pe(a)?jt.apply(u,t?a:cn(a)):u.push(a)}return u}function ln(n,t,e){var r=-1,u=n?n.length:0;if("number"==typeof e)r=(0>e?St(0,u+e):e||0)-1;else if(e)return r=_n(n,t),n[r]===t?r:-1;for(;++r<u;)if(n[r]===t)return r;return-1}function fn(n,t,e){return n?At.call(n,0,-(null==t||e?1:t)):[]}function sn(n){var t=arguments,e=t.length,u={},a=[];return he(n,function(n){if(ln(a,n)<0){for(var o=e;--o;)if(!(u[o]||(u[o]=r(t[o])))(n))return;a.push(n)}}),a}function pn(n,t,e){if(n){var r=n.length;return null==t||e?n[r-1]:At.call(n,-t||r)}}function gn(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(0>e?St(0,r+e):Dt(e,r-1))+1);r--;)if(n[r]===t)return r;return-1}function vn(n,t){for(var e=-1,r=n?n.length:0,u={};++e<r;){var a=n[e];t?u[a]=t[e]:u[a[0]]=a[1]}return u}function hn(n,t,e){n=+n||0,e=+e||1,null==t&&(t=n,n=0);for(var r=-1,u=St(0,mt((t-n)/e)),a=Array(u);++r<u;)a[r]=n,n+=e;return a}function yn(n,t,e){return n?At.call(n,null==t||e?1:t):[]}function _n(n,t,e,r){var u=0,a=n?n.length:u;for(e=e?o(e,r):Tn,t=e(t);a>u;){var i=u+a>>>1;e(n[i])<t?u=i+1:a=i}return u}function mn(){for(var n=-1,t=dt.apply(Zn,arguments),e=t.length,r=[];++n<e;){var u=t[n];ln(r,u)<0&&r.push(u)}return r}function dn(n,t,e,r){var u=-1,a=n?n.length:0,i=[],c=[];for("function"==typeof t&&(r=e,e=t,t=!1),e=o(e,r);++u<a;){var l=e(n[u],u,n);(t?!u||c[c.length-1]!==l:ln(c,l)<0)&&(c.push(l),i.push(n[u]))}return i}function bn(n){for(var t=-1,e=n?n.length:0,u=r(arguments,1,20),a=[];++t<e;){var o=n[t];u(o)||a.push(o)}return a}function xn(n){for(var t=-1,e=n?V(J(arguments,"length")):0,r=Array(e);++t<e;)r[t]=J(arguments,t);return r}function wn(n,t){return 1>n?t():function(){return--n<1?t.apply(this,arguments):void 0}}function jn(n,t){return Wt||kt&&arguments.length>2?kt.call.apply(kt,arguments):a(n,t,At.call(arguments,2))}function En(n){for(var t=arguments,e=t.length>1?0:(t=y(n),-1),r=t.length;++e<r;){var u=t[e];n[u]=jn(n[u],n)}return n}function An(){var n=arguments;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}}function On(n,t,e){function r(){i=null,e||(a=n.apply(o,u))}var u,a,o,i;return function(){var c=e&&!i;return u=arguments,o=this,clearTimeout(i),i=setTimeout(r,t),c&&(a=n.apply(o,u)),a}}function kn(n,e){var r=At.call(arguments,2);return setTimeout(function(){n.apply(t,r)},e)}function Ln(n){var e=At.call(arguments,1);return setTimeout(function(){n.apply(t,e)},1)}function In(n,t){return a(t,n,At.call(arguments,2))}function Bn(n,t){var e={};return function(){var r=t?t.apply(this,arguments):arguments[0];return wt.call(e,r)?e[r]:e[r]=n.apply(this,arguments)}}function Sn(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}}function Dn(n){return a(n,At.call(arguments,1))}function Pn(n,t){function e(){i=new Date,o=null,u=n.apply(a,r)}var r,u,a,o,i=0;return function(){var c=new Date,l=t-(c-i);return r=arguments,a=this,0>=l?(clearTimeout(o),i=c,u=n.apply(a,r)):o||(o=setTimeout(e,l)),u}}function $n(n,t){return function(){var e=[n];return jt.apply(e,arguments),t.apply(this,e)}}function Fn(n){return null==n?"":(n+"").replace(vt,l)}function Tn(n){return n}function Rn(n){he(y(n),function(t){var r=e[t]=n[t];e.prototype[t]=function(){var n=[this.__wrapped__];jt.apply(n,arguments);var t=r.apply(e,n);return this.__chain__&&(t=new e(t),t.__chain__=!0),t}})}function Hn(){return n._=ut,this}function Cn(n,t){return null==n&&null==t&&(t=1),n=+n||0,null==t&&(t=n,n=0),n+bt(Pt()*((+t||0)-n+1))}function qn(n,t){var e=n?n[t]:null;return A(e)?n[t]():e}function Nn(n,t,r){n||(n=""),r||(r={});var u,a,o=0,i=e.templateSettings,l="__p += '",f=r.variable||i.variable,s=f,p=RegExp((r.escape||i.escape||gt).source+"|"+(r.interpolate||i.interpolate||gt).source+"|"+(r.evaluate||i.evaluate||gt).source+"|$","g");if(n.replace(p,function(t,e,r,a,i){l+=n.slice(o,i).replace(ht,c),l+=e?"' +\n__e("+e+") +\n'":a?"';\n"+a+";\n__p += '":r?"' +\n((__t = ("+r+")) == null ? '' : __t) +\n'":"",u||(u=a||at.test(e||r)),o=i+t.length}),l+="';\n",!s)if(f="obj",u)l="with ("+f+") {\n"+l+"\n}\n";else{var g=RegExp("(\\(\\s*)"+f+"\\."+f+"\\b","g");l=l.replace(st,"$&"+f+".").replace(g,"$1__d")}l=(u?l.replace(it,""):l).replace(ct,"$1").replace(lt,"$1;"),l="function("+f+") {\n"+(s?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(s?"":", __d = "+f+"."+f+" || "+f)+";\n")+l+"return __p\n}";var v=Yt?"\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+_t++ +"]"):"";try{a=Function("_","return "+l+v)(e)}catch(h){throw h.source=l,h}return t?a(t):(a.source=l,a)}function Mn(n,t,e){n=+n||0;for(var r=-1,u=Array(n);++r<n;)u[r]=t.call(e,r);return u}function Kn(n){return null==n?"":(n+"").replace(ot,s)}function zn(n){var t=tt++;return n?n+t:t}function Un(n){return n=new e(n),n.__chain__=!0,n}function Vn(n,t){return t(n),n}function Gn(){return this.__chain__=!0,this}function Jn(){return this.__wrapped__}var Qn="object"==typeof exports&&exports,Wn="object"==typeof global&&global;Wn.global===Wn&&(n=Wn);var Xn,Yn,Zn=[],nt={},tt=0,et={},rt=30,ut=n._,at=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,ot=/&(?:amp|lt|gt|quot|#x27);/g,it=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,lt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/\w*$/,st=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,pt=RegExp("^"+(nt.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),gt=/($^)/,vt=/[&<>"']/g,ht=/['\n\r\t\u2028\u2029\\]/g,yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=0,mt=Math.ceil,dt=Zn.concat,bt=Math.floor,xt=pt.test(xt=Object.getPrototypeOf)&&xt,wt=nt.hasOwnProperty,jt=Zn.push,Et=nt.propertyIsEnumerable,At=Zn.slice,Ot=nt.toString,kt=pt.test(kt=At.bind)&&kt,Lt=pt.test(Lt=Array.isArray)&&Lt,It=n.isFinite,Bt=pt.test(Bt=Object.keys)&&Bt,St=Math.max,Dt=Math.min,Pt=Math.random,$t="[object Arguments]",Ft="[object Array]",Tt="[object Boolean]",Rt="[object Date]",Ht="[object Function]",Ct="[object Number]",qt="[object Object]",Nt="[object RegExp]",Mt="[object String]",Kt=(Kt={0:1,length:1},Zn.splice.call(Kt,0,1),Kt[0]),zt=!0;!function(){function n(){this.x=1}var t=[];n.prototype={valueOf:1,y:1};for(var e in new n)t.push(e);for(e in arguments)zt=!e;Xn=!/valueOf/.test(t),Yn="x"!=t[0]}(1);var Ut=!p(arguments),Vt="x"!=At.call("x")[0],Gt="x"[0]+Object("x")[0]!="xx";try{var Jt=Ot.call(n.document||0)==qt}catch(Qt){}var Wt=kt&&/\n|Opera/.test(kt+Ot.call(n.opera)),Xt=Bt&&/^.+$|true/.test(Bt+!!n.attachEvent);try{var Yt=(Function("//@")(),!n.attachEvent)}catch(Qt){}var Zt={};Zt[$t]=Zt[Ht]=!1,Zt[Ft]=Zt[Tt]=Zt[Rt]=Zt[Ct]=Zt[qt]=Zt[Nt]=Zt[Mt]=!0;var ne={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},te={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var ee=Nn("<% if (obj.useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result = <%= firstArg %>;\nif (!<%= firstArg %>) return result;\n<%= top %>;\n<% if (arrayLoop) { %>var length = iteratee.length; index = -1;\nif (typeof length == 'number') {  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayLoop %>\n  }\n}\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectLoop %>\n  }    <% } %>  <% } %>  <% if (arrayLoop || noArgsEnum) { %>\n}<% } %>\n<%= bottom %>;\nreturn result"),re={args:"collection, callback, thisArg",top:"callback = createCallback(callback, thisArg)",arrayLoop:"if (callback(value, index, collection) === false) return result",objectLoop:"if (callback(value, index, collection) === false) return result"},ue={useHas:!1,args:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",objectLoop:"result[index] = value",bottom:"  }\n}"},ae={arrayLoop:null};Ut&&(p=function(n){return n?wt.call(n,"callee"):!1});var oe=i(re,ae,{useHas:!1}),ie=i(re,ae),ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},le=m(ce),fe=i(ue,{objectLoop:"if (result[index] == null) "+ue.objectLoop}),se=i(ue),pe=Lt||function(n){return Ot.call(n)==Ft};A(/x/)&&(A=function(n){return Ot.call(n)==Ht});var ge=xt?function(n){if(!n||"object"!=typeof n)return!1;var t=n.valueOf,e="function"==typeof t&&(e=xt(t))&&xt(e);return e?n==e||xt(n)==e&&!p(n):g(n)}:g,ve=Bt?function(n){var t=typeof n;return"function"==t&&Et.call(n,"prototype")?v(n):n&&ne[t]?Bt(n):[]}:v,he=i(re);e.VERSION="0.9.0",e.after=wn,e.bind=jn,e.bindAll=En,e.chain=Un,e.clone=h,e.compact=un,e.compose=An,e.contains=H,e.countBy=C,e.debounce=On,e.defaults=fe,e.defer=Ln,e.delay=kn,e.difference=an,e.escape=Fn,e.every=q,e.extend=se,e.filter=N,e.find=M,e.first=on,e.flatten=cn,e.forEach=he,e.forIn=oe,e.forOwn=ie,e.functions=y,e.groupBy=K,e.has=_,e.identity=Tn,e.indexOf=ln,e.initial=fn,e.intersection=sn,e.invert=m,e.invoke=z,e.isArguments=p,e.isArray=pe,e.isBoolean=d,e.isDate=b,e.isElement=x,e.isEmpty=w,e.isEqual=j,e.isFinite=E,e.isFunction=A,e.isNaN=k,e.isNull=L,e.isNumber=I,e.isObject=O,e.isPlainObject=ge,e.isRegExp=B,e.isString=S,e.isUndefined=D,e.keys=ve,e.last=pn,e.lastIndexOf=gn,e.lateBind=In,e.map=U,e.max=V,e.memoize=Bn,e.merge=P,e.min=G,e.mixin=Rn,e.noConflict=Hn,e.object=vn,e.omit=$,e.once=Sn,e.pairs=F,e.partial=Dn,e.pick=T,e.pluck=J,e.random=Cn,e.range=hn,e.reduce=Q,e.reduceRight=W,e.reject=X,e.rest=yn,e.result=qn,e.shuffle=Y,e.size=Z,e.some=nn,e.sortBy=tn,e.sortedIndex=_n,e.tap=Vn,e.template=Nn,e.throttle=Pn,e.times=Mn,e.toArray=en,e.unescape=Kn,e.union=mn,e.uniq=dn,e.uniqueId=zn,e.values=R,e.where=rn,e.without=bn,e.wrap=$n,e.zip=xn,e.all=q,e.any=nn,e.collect=U,e.detect=M,e.drop=yn,e.each=he,e.foldl=Q,e.foldr=W,e.head=on,e.include=H,e.inject=Q,e.methods=y,e.select=N,e.tail=yn,e.take=on,e.unique=dn,e._iteratorTemplate=ee,Rn(e),e.prototype.chain=Gn,e.prototype.value=Jn,he(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=Zn[n];e.prototype[n]=function(){var n=this.__wrapped__;return t.apply(n,arguments),Kt&&0===n.length&&delete n[0],this.__chain__&&(n=new e(n),n.__chain__=!0),n}}),he(["concat","join","slice"],function(n){var t=Zn[n];e.prototype[n]=function(){var n=this.__wrapped__,r=t.apply(n,arguments);return this.__chain__&&(r=new e(r),r.__chain__=!0),r}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n._=e,define(function(){return e})):Qn?"object"==typeof module&&module&&module.exports==Qn?(module.exports=e)._=e:Qn._=e:n._=e}(this);
!function(t,e){var n=t.Miso=t.Miso||{};n.Events={publish:function(t){var n=e.toArray(arguments);return n.shift(),this._events&&this._events[t]&&e.each(this._events[t],function(t){t.callback.apply(t.context||this,n)},this),this},subscribe:function(t,n,i){i=i||{},this._events=this._events||{},this._events[t]=this._events[t]||[];var s,r={callback:n,priority:i.priority||0,token:i.token||e.uniqueId("t"),context:i.context||this};return e.each(this._events[t],function(t,n){e.isUndefined(s)&&t.priority<=r.priority&&(s=n)}),this._events[t].splice(s,0,r),r.token},subscribeOnce:function(t,n,i){this._events=this._events||{},i=i||{};var s=this;return"undefined"==typeof i.token&&(i.token=e.uniqueId("t")),this.subscribe(t,function(){s.unsubscribe(t,{token:i.token}),n.apply(this,arguments)},i)},unsubscribe:function(t,n){return e.isUndefined(this._events[t])?this:(e.isFunction(n)?this._events[t]=e.reject(this._events[t],function(t){return t.callback===n}):e.isString(n)?this._events[t]=e.reject(this._events[t],function(t){return t.token===n}):this._events[t]=[],this)}}}(this,_);
(function(t){function e(t,e,n,s){var r=n.lang();return r[t].call?r[t](n,s):r[t][e]}function n(t,e){return function(n){return o(t.call(this,n),e)}}function s(t){return function(e){var n=t.call(this,e);return n+this.lang().ordinal(n)}}function r(t,e,n){this._d=t,this._isUTC=!!e,this._a=t._a||null,this._lang=n||!1}function a(t){var e=this._data={},n=t.years||t.y||0,s=t.months||t.M||0,r=t.weeks||t.w||0,a=t.days||t.d||0,o=t.hours||t.h||0,u=t.minutes||t.m||0,h=t.seconds||t.s||0,d=t.milliseconds||t.ms||0;this._milliseconds=d+1e3*h+6e4*u+36e5*o,this._days=a+7*r,this._months=s+12*n,e.milliseconds=d%1e3,h+=i(d/1e3),e.seconds=h%60,u+=i(h/60),e.minutes=u%60,o+=i(u/60),e.hours=o%24,a+=i(o/24),a+=7*r,e.days=a%30,s+=i(a/30),e.months=s%12,n+=i(s/12),e.years=n,this._lang=!1}function i(t){return 0>t?Math.ceil(t):Math.floor(t)}function o(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function u(t,e,n){var s,r=e._milliseconds,a=e._days,i=e._months;r&&t._d.setTime(+t+r*n),a&&t.date(t.date()+a*n),i&&(s=t.date(),t.date(1).month(t.month()+i*n).date(Math.min(s,t.daysInMonth())))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(n=0;s>n;n++)~~t[n]!==~~e[n]&&a++;return a+r}function c(t,e,n,s){var r,a,i=[];for(r=0;7>r;r++)i[r]=t[r]=null==t[r]?2===r?1:0:t[r];return t[7]=i[7]=e,null!=t[8]&&(i[8]=t[8]),t[3]+=n||0,t[4]+=s||0,a=new Date(0),e?(a.setUTCFullYear(t[0],t[1],t[2]),a.setUTCHours(t[3],t[4],t[5],t[6])):(a.setFullYear(t[0],t[1],t[2]),a.setHours(t[3],t[4],t[5],t[6])),a._a=i,a}function f(t,e){var n,s,r=[];for(!e&&x&&(e=require("./lang/"+t)),n=0;n<A.length;n++)e[A[n]]=e[A[n]]||H.en[A[n]];for(n=0;12>n;n++)s=k([2e3,n]),r[n]=new RegExp("^"+(e.months[n]||e.months(s,""))+"|^"+(e.monthsShort[n]||e.monthsShort(s,"")).replace(".",""),"i");return e.monthsParse=e.monthsParse||r,H[t]=e,e}function l(t){var e="string"==typeof t&&t||t&&t._lang||null;return e?H[e]||f(e):k}function m(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function y(t){var e,n,s=t.match(U);for(e=0,n=s.length;n>e;e++)et[s[e]]?s[e]=et[s[e]]:s[e]=m(s[e]);return function(r){var a="";for(e=0;n>e;e++)a+="function"==typeof s[e].call?s[e].call(r,t):s[e];return a}}function _(t,e){function n(e){return t.lang().longDateFormat[e]||e}for(var s=5;s--&&O.test(e);)e=e.replace(O,n);return Q[e]||(Q[e]=y(e)),Q[e](t)}function D(t){switch(t){case"DDDD":return J;case"YYYY":return N;case"S":case"SS":case"SSS":case"DDD":return E;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return $;case"Z":case"ZZ":return j;case"T":return I;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return W;default:return new RegExp(t.replace("\\",""))}}function M(t,e,n,s){var r,a;switch(t){case"M":case"MM":n[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":for(r=0;12>r;r++)if(l().monthsParse[r].test(e)){n[1]=r,a=!0;break}a||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(n[2]=~~e);break;case"YY":n[0]=~~e+(~~e>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(e);break;case"a":case"A":s.isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~e;break;case"m":case"mm":n[4]=~~e;break;case"s":case"ss":n[5]=~~e;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+e));break;case"Z":case"ZZ":s.isUTC=!0,r=(e+"").match(B),r&&r[1]&&(s.tzh=~~r[1]),r&&r[2]&&(s.tzm=~~r[2]),r&&"+"===r[0]&&(s.tzh=-s.tzh,s.tzm=-s.tzm)}null==e&&(n[8]=!1)}function g(t,e){var n,s,r=[0,0,1,0,0,0,0],a={tzh:0,tzm:0},i=e.match(U);for(n=0;n<i.length;n++)s=(D(i[n]).exec(t)||[])[0],s&&(t=t.slice(t.indexOf(s)+s.length)),et[i[n]]&&M(i[n],s,r,a);return a.isPm&&r[3]<12&&(r[3]+=12),a.isPm===!1&&12===r[3]&&(r[3]=0),c(r,a.isUTC,a.tzh,a.tzm)}function p(t,e){var n,s,a,i,o,u=t.match(P)||[],h=99;for(a=0;a<e.length;a++)i=g(t,e[a]),s=_(new r(i),e[a]).match(P)||[],o=d(u,s),h>o&&(h=o,n=i);return n}function Y(t){var e,n="YYYY-MM-DDT";if(R.exec(t)){for(e=0;4>e;e++)if(V[e][1].exec(t)){n+=V[e][0];break}return j.exec(t)?g(t,n+" Z"):g(t,n)}return new Date(t)}function T(t,e,n,s,r){var a=r.relativeTime[t];return"function"==typeof a?a(e||1,!!n,t,s):a.replace(/%d/i,e||1)}function v(t,e,n){var s=b(Math.abs(t)/1e3),r=b(s/60),a=b(r/60),i=b(a/24),o=b(i/365),u=45>s&&["s",s]||1===r&&["m"]||45>r&&["mm",r]||1===a&&["h"]||22>a&&["hh",a]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",b(i/30)]||1===o&&["y"]||["yy",o];return u[2]=e,u[3]=t>0,u[4]=n,T.apply({},u)}function w(t,e){k.fn[t]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function S(t){k.duration.fn[t]=function(){return this._data[t]}}function F(t,e){k.duration.fn["as"+t]=function(){return+this/e}}for(var k,z,L="1.7.2",b=Math.round,H={},C="en",x="undefined"!=typeof module&&module.exports,A="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),Z=/^\/?Date\((\-?\d+)/i,U=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,P=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,W=/\d\d?/,E=/\d{1,3}/,J=/\d{3}/,N=/\d{1,4}/,$=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,j=/Z|[\+\-]\d\d:?\d\d/i,I=/T/i,R=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,q="YYYY-MM-DDTHH:mm:ssZ",V=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],B=/([\+\-]|\d\d)/gi,G="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),K={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Q={},X="DDD w M D d".split(" "),tt="M D H h m s w".split(" "),et={M:function(){return this.month()+1},MMM:function(t){return e("monthsShort",this.month(),this,t)},MMMM:function(t){return e("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){var t=new Date(this.year(),this.month(),this.date()),e=new Date(this.year(),0,1);return~~((t-e)/864e5+1.5)},d:function(){return this.day()},dd:function(t){return e("weekdaysMin",this.day(),this,t)},ddd:function(t){return e("weekdaysShort",this.day(),this,t)},dddd:function(t){return e("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),e=new Date(t.getFullYear(),0,4);return~~((t-e)/864e5/7+1.5)},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return o(~~(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+o(~~(t/60),2)+":"+o(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+o(~~(10*t/6),4)}};X.length;)z=X.pop(),et[z+"o"]=s(et[z]);for(;tt.length;)z=tt.pop(),et[z+z]=n(et[z],2);for(et.DDDD=n(et.DDD,3),k=function(e,n){if(null===e||""===e)return null;var s,a;return k.isMoment(e)?new r(new Date(+e._d),e._isUTC,e._lang):(n?s=h(n)?p(e,n):g(e,n):(a=Z.exec(e),s=e===t?new Date:a?new Date(+a[1]):e instanceof Date?e:h(e)?c(e):"string"==typeof e?Y(e):new Date(e)),new r(s))},k.utc=function(t,e){return h(t)?new r(c(t,!0),!0):("string"!=typeof t||j.exec(t)||(t+=" +0000",e&&(e+=" Z")),k(t,e).utc())},k.unix=function(t){return k(1e3*t)},k.duration=function(t,e){var n,s=k.isDuration(t),r="number"==typeof t,i=s?t._data:r?{}:t;return r&&(e?i[e]=t:i.milliseconds=t),n=new a(i),s&&(n._lang=t._lang),n},k.humanizeDuration=function(t,e,n){return k.duration(t,e===!0?null:e).humanize(e===!0?!0:n)},k.version=L,k.defaultFormat=q,k.lang=function(t,e){var n;if(!t)return C;if((e||!H[t])&&f(t,e),H[t]){for(n=0;n<A.length;n++)k[A[n]]=H[t][A[n]];k.monthsParse=H[t].monthsParse,C=t}},k.langData=l,k.isMoment=function(t){return t instanceof r},k.isDuration=function(t){return t instanceof a},k.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"}}),k.fn=r.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!d(this._a,(this._a[7]?k.utc(this._a):k(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){return _(this,t?t:k.defaultFormat)},add:function(t,e){var n=e?k.duration(+e,t):k.duration(t);return u(this,n,1),this},subtract:function(t,e){var n=e?k.duration(+e,t):k.duration(t);return u(this,n,-1),this},diff:function(t,e,n){var s,r=this._isUTC?k(t).utc():k(t).local(),a=6e4*(this.zone()-r.zone()),i=this._d-r._d-a,o=this.year()-r.year(),u=this.month()-r.month(),h=this.date()-r.date();return s="months"===e?12*o+u+h/30:"years"===e?o+(u+h/30)/12:"seconds"===e?i/1e3:"minutes"===e?i/6e4:"hours"===e?i/36e5:"days"===e?i/864e5:"weeks"===e?i/6048e5:i,n?s:b(s)},from:function(t,e){return k.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(k(),t)},calendar:function(){var t=this.diff(k().sod(),"days",!0),e=this.lang().calendar,n=e.sameElse,s=-6>t?n:-1>t?e.lastWeek:0>t?e.lastDay:1>t?e.sameDay:2>t?e.nextDay:7>t?e.nextWeek:n;return this.format("function"==typeof s?s.apply(this):s)},isLeapYear:function(){var t=this.year();return t%4===0&&t%100!==0||t%400===0},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return k.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?l(this):(this._lang=e,this)}},z=0;z<G.length;z++)w(G[z].toLowerCase(),G[z]);w("year","FullYear"),k.duration.fn=a.prototype={weeks:function(){return i(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=this.lang().relativeTime,s=v(e,!t,this.lang()),r=0>=e?n.past:n.future;return t&&(s="function"==typeof r?r(s):r.replace(/%s/i,s)),s},lang:k.fn.lang};for(z in K)K.hasOwnProperty(z)&&(F(z,K[z]),S(z.toLowerCase()));F("Weeks",6048e5),x&&(module.exports=k),"undefined"==typeof ender&&(this.moment=k),"function"==typeof define&&define.amd&&define("moment",[],function(){return k})}).call(this);
!function(n){function e(n){var e=v[n]={};return s(n.split(/\s+/),function(n){e[n]=!0}),e}var r={},t=Array.prototype,i=Object.prototype,o=i.hasOwnProperty,u=i.toString,f=t.forEach,a=t.indexOf,c=t.slice,s=function(n,e,t){var i,u,a;if(n)if(f&&n.forEach===f)n.forEach(e,t);else if(n.length===+n.length){for(u=0,a=n.length;a>u;u++)if(u in n&&e.call(t,n[u],u,n)===r)return}else for(i in n)if(o.call(n,i)&&e.call(t,n[i],i,n)===r)return},l=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},h=function(n){return s(c.call(arguments,1),function(e){var r;for(r in e)void 0!==e[r]&&(n[r]=e[r])}),n},p=function(n,e,r){var t;if(e){if(a)return a.call(e,n,r);for(t=e.length,r=r?0>r?Math.max(0,t+r):r:0;t>r;r++)if(r in e&&e[r]===n)return r}return-1},m={};s("Boolean Number String Function Array Date RegExp Object".split(" "),function(n,e){m["[object "+n+"]"]=n.toLowerCase()});var d=function(n){return null==n?String(n):m[u.call(n)]||"object"},g={},v={};g.Callbacks=function(n){n="string"==typeof n?v[n]||e(n):h({},n);var r,t,i,o,u,f,a=[],c=!n.once&&[],l=function(e){for(r=n.memory&&e,t=!0,f=o||0,o=0,u=a.length,i=!0;a&&u>f;f++)if(a[f].apply(e[0],e[1])===!1&&n.stopOnFalse){r=!1;break}i=!1,a&&(c?c.length&&l(c.shift()):r?a=[]:m.disable())},m={add:function(){if(a){var e=a.length;!function t(e){s(e,function(e){var r=d(e);"function"!==r||n.unique&&m.has(e)?e&&e.length&&"string"!==r&&t(e):a.push(e)})}(arguments),i?u=a.length:r&&(o=e,l(r))}return this},remove:function(){return a&&s(arguments,function(n){for(var e;(e=p(n,a,e))>-1;)a.splice(e,1),i&&(u>=e&&u--,f>=e&&f--)}),this},has:function(n){return p(n,a)>-1},empty:function(){return a=[],this},disable:function(){return a=c=r=void 0,this},disabled:function(){return!a},lock:function(){return c=void 0,r||m.disable(),this},locked:function(){return!c},fireWith:function(n,e){return e=e||[],e=[n,e.slice?e.slice():e],!a||t&&!c||(i?c.push(e):l(e)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!t}};return m},g.Deferred=function(n){var e=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],r="pending",t={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var n=arguments;return g.Deferred(function(r){s(e,function(e,t){var o=e[0],u=n[t];i[e[1]](l(u)?function(){var n=u.apply(this,arguments);n&&l(n.promise)?n.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o+"With"](this===i?r:this,[n])}:r[o])}),n=null}).promise()},promise:function(n){return"object"==typeof n?h(n,t):t}},i={};return t.pipe=t.then,s(e,function(n,o){var u=n[2],f=n[3];t[n[1]]=u.add,f&&u.add(function(){r=f},e[1^o][2].disable,e[2][2].lock),i[n[0]]=u.fire,i[n[0]+"With"]=u.fireWith}),t.promise(i),n&&n.call(i,i),i},g.when=function(n){var e,r,t,i=0,o=c.call(arguments),u=o.length,f=1!==u||n&&l(n.promise)?u:0,a=1===f?n:g.Deferred(),s=function(n,r,t){return function(i){r[n]=this,t[n]=arguments.length>1?c.call(arguments):i,t===e?a.notifyWith(r,t):--f||a.resolveWith(r,t)}};if(u>1)for(e=new Array(u),r=new Array(u),t=new Array(u);u>i;i++)o[i]&&l(o[i].promise)?o[i].promise().done(s(i,t,o)).fail(a.reject).progress(s(i,r,e)):--f;return f||a.resolveWith(t,o),a.promise()},"undefined"!=typeof module&&module.exports?module.exports=g:"undefined"!=typeof n._?n._.mixin(g):n._=g}(this);
!function(){var n=this.math={};n.mean=n.ave=n.average=function(r,t){return n.sum(r,t)/_(r).size()},n.median=function(r){var t=(r.length+1)/2,e=n.sort(r);return e.length%2?e[t-1]:(e[t-1.5]+e[t-.5])/2},n.pow=function(n,r){return _.isNumber(n)?Math.pow(n,r):_.isArray(n)?_.map(n,function(n){return _.pow(n,r)}):void 0},n.scale=function(n,r){var r=r||1,t=_.max(n);return _.map(n,function(n){return n*(r/t)})},n.slope=function(n,r){return(r[1]-n[1])/(r[0]-n[0])},n.sort=function(n){return n.sort(function(n,r){return n-r})},n.stdDeviation=n.sigma=function(n){return Math.sqrt(_(n).variance())},n.sum=function(n,r){if(_.isArray(n)&&"number"==typeof n[0])var t=n;else var r=r||"value",t=_(n).pluck(r);for(var e=0,u=0,a=t.length;a>u;u++)e+=t[u];return e},n.transpose=function(n){var r=[];return _(n).each(function(n,t){_(n).each(function(n,e){r[e]||(r[e]=[]),r[e][t]=n})}),r},n.variance=function(n){var r=_(n).mean();return _(n).chain().map(function(n){return _(n-r).pow(2)}).mean().value()},_.mixin(n)}();
!function(t){t.Miso=t.Miso||{},t.Miso.Dataset=function(t){t=t||{},this.length=0,this._columns=[],this._columnPositionByName={},this._computedColumns=[],this._initialize(t)}}(this),function(t,e){var i=t.Miso||(t.Miso={}),n=t.Miso.Dataset;n.Column=function(t){return e.extend(this,t),this._id=t.id||e.uniqueId(),this.data=t.data||[],this},e.extend(n.Column.prototype,{toNumeric:function(t){return n.types[this.type].numeric(t)},numericAt:function(t){return this.toNumeric(this.data[t])},coerce:function(){this.data=e.map(this.data,function(t){return n.types[this.type].coerce(t,this)},this)},compute:function(t,e){if(this.func){var i=this.func(t);return"undefined"!=typeof e?this.data[e]=i:this.data.push(i),i}},isComputed:function(){return!e.isUndefined(this.func)},_sum:function(){return e.sum(this.data)},_mean:function(){for(var t=0,e=0;e<this.data.length;e++)t+=this.numericAt(e);return t/=this.data.length,n.types[this.type].coerce(t,this)},_median:function(){return n.types[this.type].coerce(e.median(this.data),this)},_max:function(){for(var t=-(1/0),e=0;e<this.data.length;e++)null!==this.data[e]&&n.types[this.type].compare(this.data[e],t)>0&&(t=this.numericAt(e));return n.types[this.type].coerce(t,this)},_min:function(){for(var t=1/0,e=0;e<this.data.length;e++)null!==this.data[e]&&n.types[this.type].compare(this.data[e],t)<0&&(t=this.numericAt(e));return n.types[this.type].coerce(t,this)}}),n.DataView=function(t){if("undefined"!=typeof t){if(t=t||(t={}),e.isUndefined(t.parent))throw new Error("A view must have a parent specified.");this.parent=t.parent,this._initialize(t)}},e.extend(n.DataView.prototype,{_initialize:function(t){this.parent.syncable===!0&&(e.extend(this,i.Events),this.syncable=!0),this.idAttribute=this.parent.idAttribute,this.filter={},this.filter.columns=e.bind(this._columnFilter(t.filter.columns||void 0),this),this.filter.rows=e.bind(this._rowFilter(t.filter.rows||void 0),this),this._columns=this._selectData(),n.Builder.cacheColumns(this),n.Builder.cacheRows(this),this.syncable&&this.parent.subscribe("change",this._sync,{context:this})},_sync:function(t){var i=t.deltas,s=null;e.each(i,function(i,r){var o=this._rowPositionById[i[this.idAttribute]];if("undefined"==typeof o&&n.Event.isAdd(i))this.filter.rows&&this.filter.rows(i.changed)&&(this._add(i.changed),s="add");else{if("undefined"===o)return;e.each(i.changed,function(t,i){var n=this._columnPositionByName[i];e.isUndefined(n)||(this._columns[n].data[o]=t,s="update")},this)}var a=this.rowByPosition(o);if(n.Event.isRemove(i)||this.filter.row&&!this.filter.row(a)){var u={old:this.rowByPosition(o),changed:{}};u[this.idAttribute]=i[this.idAttribute],t.deltas.splice(r,1,u),this._remove(o),s="delete"}},this),this.syncable&&(this.publish(s,t),this.publish("change",t))},where:function(t,i){return i=i||{},i.filter=i.filter||{},e.isFunction(t)?i.filter.rows=t:i.filter=t,i.parent=this,new n.DataView(i)},_selectData:function(){var t=[];return e.each(this.parent._columns,function(e){this.filter.columns(e)&&t.push(new n.Column({name:e.name,data:[],type:e.type,_id:e._id}))},this),this.parent.each(function(e){if(this.filter.rows(e))for(var i=0;i<t.length;i++)t[i].data.push(e[t[i].name])},this),t},_columnFilter:function(t){var i;return e.isUndefined(t)?i=function(){return!0}:(e.isString(t)&&(t=[t]),t.push(this.idAttribute),i=function(i){return-1===e.indexOf(t,i.name)?!1:!0}),i},_rowFilter:function(t){var i;return e.isNumber(t)&&(t=[t]),i=e.isUndefined(t)?function(){return!0}:e.isFunction(t)?t:e.bind(function(i){return-1===e.indexOf(t,i[this.idAttribute])?!1:!0},this)},column:function(t){return this._column(t)},_column:function(t){if(!e.isUndefined(this._columnPositionByName)){var i=this._columnPositionByName[t];return this._columns[i]}},columns:function(t){return new n.DataView({filter:{columns:t},parent:this})},columnNames:function(){var t=e.pluck(this._columns,"name");return e.reject(t,function(t){return t===this.idAttribute||"_oids"===t},this)},hasColumn:function(t){return!e.isUndefined(this._columnPositionByName[t])},each:function(t,e){for(var i=0;i<this.length;i++)t.apply(e||this,[this.rowByPosition(i),i])},reverseEach:function(t,e){for(var i=this.length-1;i>=0;i--)t.apply(e||this,[this.rowByPosition(i),i])},eachColumn:function(t,e){for(var i=this.columnNames(),n=0;n<i.length;n++)t.apply(e||this,[i[n],this.column(i[n]),n])},rowByPosition:function(t){return this._row(t)},rowById:function(t){return this._row(this._rowPositionById[t])},_row:function(t){var i={};return e.each(this._columns,function(e){i[e.name]=e.data[t]}),i},_remove:function(t){var i=this._rowPositionById[t];return e.each(this._columns,function(t){t.data.splice(i,1)}),delete this._rowPositionById[t],this._rowIdByPosition.splice(i,1),this.length--,this},_add:function(t){if(e.each(t,function(i,s){var r=this.column(s);if(r.isComputed())throw"You're trying to update a computed column. Those get computed!";if("undefined"!=typeof r){var o=n.types[r.type];if(!r.force&&!o.test(t[r.name],r))throw"incorrect value '"+t[r.name]+"' of type "+n.typeOf(t[r.name],r)+" passed to column '"+r.name+"' with type "+r.type;e.isUndefined(r.before)||(t[r.name]=r.before(t[r.name])),t[r.name]=o.coerce(t[r.name],r)}},this),this._computedColumns&&e.each(this._computedColumns,function(e){var i=e.compute(t);t[e.name]=i}),e.isUndefined(this.comparator)){if(e.each(this._columns,function(i){i.isComputed()||i.data.push(e.isUndefined(t[i.name])||e.isNull(t[i.name])?null:t[i.name])}),this.length++,this._rowIdByPosition=this._rowIdByPosition||(this._rowIdByPosition=[]),this._rowPositionById=this._rowPositionById||(this._rowPositionById={}),"undefined"!=typeof this._rowPositionById[t[this.idAttribute]])throw"The id "+t[this.idAttribute]+" is not unique. The "+this.idAttribute+" column must be unique";this._rowPositionById[t[this.idAttribute]]=this._rowIdByPosition.length,this._rowIdByPosition.push(t[this.idAttribute])}else{var i,s=function(t,e,i){Array.prototype.splice.apply(i,[t,0].concat(e))};for(this.length++,i=0;i<this.length;i++){var r=this.rowByPosition(i);if(e.isUndefined(r[this.idAttribute])||this.comparator(t,r)<0){e.each(this._columns,function(e){s(i,t[e.name]?t[e.name]:null,e.data)});break}}this._rowIdByPosition=[],this._rowPositionById={},this.each(function(t,e){this._rowIdByPosition.push(t[this.idAttribute]),this._rowPositionById[t[this.idAttribute]]=e},this)}return this},rows:function(t){return new n.DataView({filter:{rows:t},parent:this})},sort:function(t){var i={},n=[];if(e.isFunction(t)?i.comparator=t:i=t||{},i.comparator)this.comparator=i.comparator;else if(e.isUndefined(this.comparator))throw new Error("Cannot sort without this.comparator.");var s,r,o;for(s=0;s<this.length;s++)n[s]=this._row(s);for(n.sort(this.comparator),s=n.length;s--;)for(o=n[s],this._rowIdByPosition[s]=o[this.idAttribute],this._rowPositionById[o[this.idAttribute]]=s,r=this._columns.length;r--;){var a=this._columns[r];a.data[s]=o[a.name]}return this.syncable&&!i.silent&&this.publish("sort"),this},toJSON:function(){for(var t=[],e=0;e<this.length;e++)t.push(this.rowByPosition(e));return t}})}(this,_),function(t,e,i){var n=t.Miso||(t.Miso={}),s=t.Miso.Dataset;s.prototype=new s.DataView,e.extend(s.prototype,{_initialize:function(t){t.sync===!0&&(e.extend(this,n.Events),this.syncable=!0),this.idAttribute=t.idAttribute||"_id",this.importer=t.importer||null,this.parser=t.parser||s.Parsers.Obj,e.isUndefined(t.parser)&&(t.strict?this.parser=s.Parsers.Strict:t.delimiter&&(this.parser=s.Parsers.Delimited)),null===this.importer&&(t.url?t.interval?(this.importer=s.Importers.Polling,this.interval=t.interval):this.importer=s.Importers.Remote:this.importer=s.Importers.Local),this.parser=new this.parser(t),this.parser instanceof s.Parsers.Delimited&&(t.dataType="text"),this.importer=new this.importer(t),t.comparator&&(this.comparator=t.comparator),t.ready&&(this.ready=t.ready),t.resetOnFetch&&(this.resetOnFetch=t.resetOnFetch),t.uniqueAgainst&&(this.uniqueAgainst=t.uniqueAgainst),e.isUndefined(t.data)&&e.isUndefined(t.url)&&this._addIdColumn(),t.deferred?this.deferred=t.deferred:this.deferred=new e.Deferred,t.columns&&this.addColumns(t.columns)},fetch:function(t){t=t||{};var i=this.deferred;if(e.isNull(this.importer))throw"No importer defined";return this.importer.fetch({success:e.bind(function(e){try{this._apply(e)}catch(n){if(!t.error)throw n;t.error.call(this,n)}this.comparator&&this.sort(),this.ready&&this.ready.call(this),t.success&&t.success.call(this),i.resolveWith(this,[this])},this),error:e.bind(function(e){t.error&&t.error.call(this,e),i.reject(e)},this)}),i.promise()},_applications:{againstColumn:function(t){var i=(e.keys(t),this.uniqueAgainst),n=this.column(i),r=[],o=[];e.each(t[i],function(i,a){var u=n.data.indexOf(s.types[n.type].coerce(i)),h={};e.each(t,function(t,e){h[e]=t[a]}),-1===u?r.push(h):(o.push(h),h[this.idAttribute]=this.rowById(this.column(this.idAttribute).data[u])[this.idAttribute],this.update(h))},this),r.length>0&&this.add(r)},blind:function(t){for(var i,n=[],s=e.keys(t),r=e.max(e.map(s,function(e){return t[e].length},this)),o=0;r>o;o++){i={};for(var a=0;a<s.length;a++)i[s[a]]=t[s[a]][o];n.push(i)}this.add(n)}},_apply:function(t){var i=this.parser.parse(t);if(this.fetched)if(this.resetOnFetch)this.reset(),this._applications.blind.call(this,i.data);else if(this.uniqueAgainst){if(!this.hasColumn(this.uniqueAgainst))throw new Error("You requested a unique add against a column that doesn't exist.");this._applications.againstColumn.call(this,i.data)}else this._applications.blind.call(this,i.data);else this._addIdColumn(),this.addColumns(e.map(i.columns,function(t){return{name:t}})),s.Builder.detectColumnTypes(this,i.data),this._applications.blind.call(this,i.data),this.fetched=!0;s.Builder.cacheRows(this)},addColumns:function(t){e.each(t,function(t){this.addColumn(t)},this)},addComputedColumn:function(t,i,n){if(e.isUndefined(this.column(t))){if("undefined"==typeof s.types[i])throw"The type "+i+" doesn't exist";var r=new s.Column({name:t,type:i,func:e.bind(n,this)});return this._columns.push(r),this._computedColumns.push(r),this._columnPositionByName[r.name]=this._columns.length-1,this.length>0&&this.each(function(t,e){r.compute(t,e)},this),r}throw"There is already a column by this name."},addColumn:function(t){return e.isUndefined(this.column(t.name))?(t=new s.Column(t),this._columns.push(t),this._columnPositionByName[t.name]=this._columns.length-1,t):!1},_addIdColumn:function(t){if(e.isUndefined(this.column(this.idAttribute))){var i=[];t&&t>0&&e.times(t,function(){i.push(e.uniqueId())});var n=this.addColumn({name:this.idAttribute,data:i});if("_id"===this.idAttribute&&(n.type="number"),0!==this._columnPositionByName[this.idAttribute]){var s=this._columnPositionByName[this.idAttribute];this._columns.splice(s,1),this._columns.unshift(n),this._columnPositionByName[this.idAttribute]=0,e.each(this._columnPositionByName,function(t,e){e!==this.idAttribute&&this._columnPositionByName[e]<s&&this._columnPositionByName[e]++},this)}}},add:function(t,i){i=i||{},e.isArray(t)||(t=[t]);var n=[];if(e.each(t,function(t){t[this.idAttribute]||(t[this.idAttribute]=e.uniqueId()),this._add(t,i),this.syncable&&!i.silent&&n.push({changed:t})},this),this.syncable&&!i.silent){var r=s.Events._buildEvent(n,this);this.publish("add",r),this.publish("change",r)}return this},remove:function(t,i){t=this._rowFilter(t);var n=[],r=[];if(this.each(function(e,i){t(e)&&(r.push(e[this.idAttribute]),n.push({old:e}))}),e.each(r,function(t){this._remove(t)},this),this.syncable&&(!i||!i.silent)){var o=s.Events._buildEvent(n,this);this.publish("remove",o),this.publish("change",o)}},_arrayUpdate:function(t){var i=[];return e.each(t,function(t){var n={old:{},changed:{}};n[this.idAttribute]=t[this.idAttribute];var r=this._rowPositionById[t[this.idAttribute]];e.each(t,function(t,i){var o=this._columns[this._columnPositionByName[i]],a=s.types[o.type];if(o.name===this.idAttribute&&o.data[r]!==t)throw"You can't update the id column";if("undefined"==typeof o)throw"column "+i+" not found!";if(!a.test(t,o))throw"Value is incorrect type";this._computedColumns[o.name]||(t=a.coerce(t,o),e.isUndefined(o.before)||(t=o.before(t)),o.data[r]!==t&&(n.old[i]=o.data[r],o.data[r]=t,n.changed[i]=t))},this),"undefined"!=typeof this._computedColumns&&e.each(this._computedColumns,function(t){var i=e.extend({},this._row(r)),s=i[t.name],o=t.compute(i,r);s!==o&&(n.old[t.name]=s,t.data[r]=o,n.changed[t.name]=o)},this),e.keys(n.changed).length>0&&i.push(n)},this),i},_functionUpdate:function(t){for(var e=[],i=0;i<this.length;i++){var n=t(this.rowByPosition(i));n!==!1&&e.push(n)}return this._arrayUpdate(e)},update:function(t,i){var n;if(e.isFunction(t))n=this._functionUpdate(t);else{var r=e.isArray(t)?t:[t];n=this._arrayUpdate(r)}if(this.syncable&&(!i||!i.silent)){var o=s.Events._buildEvent(n,this);this.publish("update",o),this.publish("change",o)}return this},reset:function(t){e.each(this._columns,function(t){t.data=[]}),this.length=0,!this.syncable||t&&t.silent||this.publish("reset")}})}(this,_,moment),function(t,e){var i=t.Miso.Dataset;i.typeOf=function(t,n){var s,r=e.keys(i.types);return r.push(r.splice(e.indexOf(r,"string"),1)[0]),r.push(r.splice(e.indexOf(r,"mixed"),1)[0]),s=e.find(r,function(e){return i.types[e].test(t,n)}),s=e.isUndefined(s)?"string":s},i.types={mixed:{name:"mixed",coerce:function(t){return e.isNull(t)||"undefined"==typeof t||e.isNaN(t)?null:t},test:function(){return!0},compare:function(t,i){return e.isEqual(t,i)?0:i>t?-1:t>i?1:void 0},numeric:function(t){return null===t||e.isNaN(+t)?null:+t}},string:{name:"string",coerce:function(t){return e.isNaN(t)||null===t||"undefined"==typeof t?null:t.toString()},test:function(t){return null===t||"undefined"==typeof t||"string"==typeof t},compare:function(t,e){return null==t&&null!=e?-1:null!=t&&null==e?1:e>t?-1:t>e?1:0},numeric:function(t){return e.isNaN(+t)||null===t?null:e.isNumber(+t)?+t:null}},"boolean":{name:"boolean",regexp:/^(true|false)$/,coerce:function(t){return e.isNaN(t)||null===t||"undefined"==typeof t?null:"false"===t?!1:Boolean(t)},test:function(t){return null===t||"undefined"==typeof t||"boolean"==typeof t||this.regexp.test(t)?!0:!1},compare:function(t,e){return null==t&&null!=e?-1:null!=t&&null==e?1:null==t&&null==e?0:t===e?0:e>t?-1:1},numeric:function(t){return null===t||e.isNaN(t)?null:t?1:0}},number:{name:"number",regexp:/^\s*[\-\.]?[0-9]+([\.][0-9]+)?\s*$/,coerce:function(t){var i=+t;return e.isNull(t)||"undefined"==typeof t||e.isNaN(i)?null:i},test:function(t){return null===t||"undefined"==typeof t||"number"==typeof t||this.regexp.test(t)?!0:!1},compare:function(t,e){return null==t&&null!=e?-1:null!=t&&null==e?1:null==t&&null==e?0:t===e?0:e>t?-1:1},numeric:function(t){return e.isNaN(t)||null===t?null:t}},time:{name:"time",format:"DD/MM/YYYY",_formatLookup:[["DD","\\d{2}"],["D","\\d{1}|\\d{2}"],["MM","\\d{2}"],["M","\\d{1}|\\d{2}"],["YYYY","\\d{4}"],["YY","\\d{2}"],["A","[AM|PM]"],["hh","\\d{2}"],["h","\\d{1}|\\d{2}"],["mm","\\d{2}"],["m","\\d{1}|\\d{2}"],["ss","\\d{2}"],["s","\\d{1}|\\d{2}"],["ZZ","[-|+]\\d{4}"],["Z","[-|+]\\d{2}:\\d{2}"]],_regexpTable:{},_regexp:function(t){if(this._regexpTable[t])return new RegExp(this._regexpTable[t],"g");var i=t;return e.each(this._formatLookup,function(t){i=i.replace(t[0],t[1])},this),i=i.split("/").join("\\/"),this._regexpTable[t]=i,new RegExp(this._regexpTable[t],"g")},coerce:function(t,i){if(i=i||{},e.isNull(t)||"undefined"==typeof t||e.isNaN(t))return null;if(e.isString(t)){var n=i.format||this.format;return moment(t,n)}return e.isNumber(t)?moment(t):t},test:function(t,i){if(i=i||{},null===t||"undefined"==typeof t)return!0;if(e.isString(t)){var n=i.format||this.format,s=this._regexp(n);return s.test(t)}return!0},compare:function(t,e){return e>t?-1:t>e?1:0},numeric:function(t){return e.isNaN(t)||null===t?null:t.valueOf()}}}}(this,_),function(t,e){var i=t.Miso.Dataset;i.Event=function(t,i){e.isArray(t)||(t=[t]),this.deltas=t,this.dataset=i||null},e.extend(i.Event.prototype,{affectedColumns:function(){var t=[];return e.each(this.deltas,function(i){i.old=i.old||[],i.changed=i.changed||[],t=e.chain(t).union(e.keys(i.old),e.keys(i.changed)).reject(function(t){return t===this.dataset.idAttribute},this).value()},this),t}}),e.extend(i.Event,{isRemove:function(t){return e.isUndefined(t.changed)||0===e.keys(t.changed).length?!0:!1},isAdd:function(t){return e.isUndefined(t.old)||0===e.keys(t.old).length?!0:!1},isUpdate:function(t){return this.isRemove(t)||this.isAdd(t)?!1:!0}}),i.Events={},i.Events._buildEvent=function(t,e){return new i.Event(t,e)}}(this,_),function(t,e){var i=t.Miso.Dataset;i.Builder={detectColumnType:function(t,n){var s=e.inject(n.slice(0,5),function(t,n){var s=i.typeOf(n);return""===n||-1!==t.indexOf(s)||e.isNull(n)||t.push(s),t},[]);return 1===s.length?t.type=s[0]:t.type="mixed",t},detectColumnTypes:function(t,n){e.each(n,function(e,n){var s=t.column(n);return s.type?void(s.force=!0):void i.Builder.detectColumnType(s,e)},this)},cacheRows:function(t){i.Builder.clearRowCache(t),e.each(t._columns[t._columnPositionByName[t.idAttribute]].data,function(e,i){t._rowPositionById[e]=i,t._rowIdByPosition.push(e)},t);var n=e.uniq(e.map(t._columns,function(t){return t.data.length}));if(n.length>1)throw new Error("Row lengths need to be the same. Empty values should be set to null."+e.map(t._columns,function(t){return t.data+"|||"}));t.length=n[0]},clearRowCache:function(t){t._rowPositionById={},t._rowIdByPosition=[]},cacheColumns:function(t){t._columnPositionByName={},e.each(t._columns,function(e,i){t._columnPositionByName[e.name]=i})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var i=e||0,n=this.length;n>i;i++)if(this[i]===t)return i;return-1})}(this,_),function(t,e){var i=t.Miso||(t.Miso={}),n=t.Miso.Dataset;n.Product=function(t){if(t=t||{},this.func=t.func,t.columns){var i=t.columns;e.isArray(t.columns)&&(i=t.columns[0]),this.valuetype=i.type,this.numeric=function(){return i.toNumeric(this.value)}}return this.func({silent:!0}),this},e.extend(n.Product.prototype,i.Events,{val:function(){return this.value},type:function(){return this.valuetype},_sync:function(t){this.func()},_buildDelta:function(t,e){return{old:t,changed:e}}}),n.Product.define=function(t){return function(i,s){s=s||{};var r=this._findColumns(i),o=this;s.type=s.type||r[0].type,s.typeOptions=s.typeOptions||r[0].typeOptions;var a=function(){var e=t.call(o,r,s);return n.types[s.type].coerce(e,s.typeOptions)};if(this.syncable){var u=new n.Product({columns:r,func:function(t){t=t||{};var i=this._buildDelta(this.value,a.call(o));if(this.value=i.changed,o.syncable){var s=n.Events._buildEvent(i,this);e.isUndefined(i.old)||t.silent||i.old===i.changed||this.publish("change",s)}}});return this.subscribe("change",u._sync,{context:u}),u}return a.call(o)}},e.extend(n.DataView.prototype,{_findColumns:function(t){var i=[];return e.isUndefined(t)&&(t=this.columnNames()),t=e.isArray(t)?t:[t],e.each(t,function(t){t=this._columns[this._columnPositionByName[t]],i.push(t)},this),i},sum:n.Product.define(function(t,i){return e.each(t,function(t){if(t.type===n.types.time.name)throw new Error("Can't sum up time")}),e.sum(e.map(t,function(t){return t._sum()}))}),max:n.Product.define(function(t,i){return e.max(e.map(t,function(t){return t._max()}))}),min:n.Product.define(function(t,i){return e.min(e.map(t,function(t){return t._min()}))}),mean:n.Product.define(function(t,i){var s=[];e.each(t,function(t){s.push(t.data)}),s=e.flatten(s);var r=t[0].type;return s=e.map(s,function(t){return n.types[r].numeric(t)}),e.mean(s)})})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Importers=function(t,e){},i.Importers.prototype.extract=function(t){return t=e.clone(t)}}(this,_),function(t,e){var i=t.Miso.Dataset;i.Importers.Local=function(t){t=t||{},this.data=t.data||null,this.extract=t.extract||this.extract},e.extend(i.Importers.Local.prototype,i.Importers.prototype,{fetch:function(t){var e=t.data?t.data:this.data;t.success(this.extract(e))}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Importers.Remote=function(t){t=t||{},this._url=t.url,this.extract=t.extract||this.extract,this.params={type:"GET",url:e.isFunction(this._url)?e.bind(this._url,this):this._url,dataType:t.dataType?t.dataType:t.jsonp?"jsonp":"json",callback:t.callback}},e.extend(i.Importers.Remote.prototype,i.Importers.prototype,{fetch:function(t){var n=e.bind(function(e){t.success(this.extract(e))},this);this.callback&&(window[this.callback]=n),i.Xhr(e.extend(this.params,{success:this.callback?this.callback:n,error:t.error}))}});var n={url:"",data:"",dataType:"",success:function(){},type:"GET",async:!0,xhr:function(){return t.ActiveXObject?new t.ActiveXObject("Microsoft.XMLHTTP"):new t.XMLHttpRequest}},s=/\?/;i.Xhr=function(t){t.dataType=t.dataType&&t.dataType.toLowerCase()||null;var r=e.isFunction(t.url)?t.url():t.url;if(t.dataType&&("jsonp"===t.dataType||"script"===t.dataType))return void i.Xhr.getJSONP(r,t.success,"script"===t.dataType,t.error,t.callback);var o=e.extend({},n,t,{url:r});return o.ajax=o.xhr(),o.ajax?("GET"===o.type&&o.data&&(o.url+=(s.test(o.url)?"&":"?")+o.data,o.data=null),o.ajax.open(o.type,o.url,o.async),o.ajax.send(o.data||null),i.Xhr.httpData(o)):void 0},i.Xhr.getJSONP=function(t,i,n,s,r){if(n){var o=document.querySelectorAll('script[src="'+t+'"]');if(o.length)return void(i&&i(!0))}var a,u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=document.createElement("script"),c=t.split("?")[1],l=!1,d=[];if(c&&!n&&(d=c.split("&")),d.length&&(a=d[d.length-1].split("=")),!r){var f=e.uniqueId("callback");r=d.length&&a[1]?a[1]:f}c||n||(t+="?"),c&&/callback/.test(c)||(c&&(t+="&"),t+="callback="+r),r&&!n&&(window[r]&&(r=r+ +new Date+e.uniqueId()),window[r]=function(t){i&&i(t),l=!0},a&&(t=t.replace(a.join("="),a[0]+"="+r))),h.onload=h.onreadystatechange=function(){if((!h.readyState||/loaded|complete/.test(h.readyState))&&(n&&i&&i(),l)){try{delete window[r]}catch(t){window[r]=void 0}u.removeChild(h)}},h.onerror=function(t){s&&s.call(null,t)},h.src=t,u.insertBefore(h,u.firstChild)},i.Xhr.httpData=function(t){var e,i,n=null;return i=function(){if(4===t.ajax.readyState){try{n=JSON.parse(t.ajax.responseText)}catch(i){}e={xml:t.ajax.responseXML,text:t.ajax.responseText,json:n},t.dataType&&(e=e[t.dataType]),/(2..)/.test(t.ajax.status)?t.success.call(t.ajax,e):t.error&&t.error.call(null,t.ajax.statusText)}},4===t.ajax.readyState?i():t.ajax.onreadystatechange=i,e}}(this,_),function(t,e){var i=t.Miso.Dataset;i.Importers.Polling=function(t){t=t||{},this.interval=t.interval||1e3,this._def=null,i.Importers.Remote.apply(this,[t])},e.extend(i.Importers.Polling.prototype,i.Importers.Remote.prototype,{fetch:function(n){null===this._def&&(this._def=e.Deferred(),this.success_callback=e.bind(function(t){n.success(this.extract(t)),this._def.resolve(this)},this),this.error_callback=e.bind(function(t){n.error(t),this._def.reject(t)},this)),e.when(this._def.promise()).then(function(t){var i=e.bind(function(){this.fetch({success:this.success_callback,error:this.error_callback})},t);t._timeout=setTimeout(i,t.interval),t._def=e.Deferred()}),i.Xhr(e.extend(this.params,{success:this.success_callback,error:this.error_callback})),t.imp=this},stop:function(){null!==this._def&&this._def.reject(),"undefined"!=typeof this._timeout&&clearTimeout(this._timeout)},start:function(){null!==this._def&&(this._def=e.Deferred(),this.fetch())}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Importers.GoogleSpreadsheet=function(t){if(t=t||{},t.url)t.url=t.url;else{if(e.isUndefined(t.key))throw new Error("Set options 'key' properties to point to your google document.");t.fast?(t.url="https://spreadsheets.google.com/tq?key="+t.key,"undefined"==typeof t.sheetName&&(t.sheetName="Sheet1"),t.url+="&sheet="+t.sheetName,this.callback="misodsgs"+(new Date).getTime(),t.url+="&tqx=version:0.6;responseHandler:"+this.callback,t.url+=";reqId:0;out:json&tq&_=1335871249558#",delete t.sheetName):t.url="https://spreadsheets.google.com/feeds/cells/"+t.key+"/"+t.worksheet+"/public/basic?alt=json-in-script&callback=",delete t.key}return this.params={type:"GET",url:t.url,dataType:"jsonp"},this},e.extend(i.Importers.GoogleSpreadsheet.prototype,i.Importers.Remote.prototype)}(this,_),function(t,e){var i=t.Miso.Dataset;i.Parsers=function(t){this.options=t||{}},e.extend(i.Parsers.prototype,{parse:function(){}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Parsers.Strict=function(t){this.options=t||{}},e.extend(i.Parsers.Strict.prototype,i.Parsers.prototype,{parse:function(t){var i={},n=[];return e.each(t.columns,function(t){if(-1!==n.indexOf(t.name))throw new Error('You have more than one column named "'+t.name+'"');n.push(t.name),i[t.name]=t.data}),{columns:n,data:i}}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Parsers.Obj=i.Parsers,e.extend(i.Parsers.Obj.prototype,i.Parsers.prototype,{parse:function(t){var i=e.keys(t[0]),n={};return e.each(i,function(t){n[t]=[]}),e.each(i,function(i){e.times(t.length,function(e){n[i].push(t[e][i])})}),{columns:i,data:n}}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Parsers.GoogleSpreadsheet=function(t){this.fast=t.fast||!1},e.extend(i.Parsers.GoogleSpreadsheet.prototype,i.Parsers.prototype,{parse:function(t){var i,n=[],s=[],r={};if("undefined"!=typeof t.status&&"error"===t.status)throw new Error("You can't use the fast importer for this url. Disable the fast flag");if(this.fast){if(n=e.pluck(t.table.cols,"label"),e.unique(n).length<n.length){var o="";throw e.inject(n,function(t,e){return t[e]=t[e]+1||1,t[e]>1&&(o=e),t},{}),new Error('You have more than one column named "'+o+'"')}e.each(t.table.rows,function(t){for(t=t.c,i=0;i<t.length;i++)s[i]=s[i]||[],""===t[i].v?s[i].push(null):s[i].push(t[i].v)}),e.each(n,function(t,e){r[t]=s[e]})}else{var a=/([A-Z]+)(\d+)/,u={};e.each(t.feed.entry,function(t){var e=a.exec(t.title.$t),i=e[1],r=parseInt(e[2],10);if(1===r){if(-1!==n.indexOf(t.content.$t))throw new Error('You have more than one column named "'+t.content.$t+'"');u[i]=s.length,n[u[i]]=t.content.$t,s[u[i]]=[]}else{var o=u[i];s[o][r-1]=t.content.$t}},this),e.each(s,function(t,i){t.length=e.max(e.pluck(s,"length")),t.splice(0,1);for(var o=0;o<t.length;o++)(e.isUndefined(t[o])||""===t[o])&&(t[o]=null);r[n[i]]=t})}return{columns:n,data:r}}})}(this,_),function(t,e){var i=t.Miso.Dataset;i.Parsers.Delimited=function(t){t=t||{},this.delimiter=t.delimiter||",",this.skipRows=t.skipRows||0,this.emptyValue=t.emptyValue||null,this.__delimiterPatterns=new RegExp("(\\"+this.delimiter+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+this.delimiter+"\\r\\n]*))","gi")},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.extend(i.Parsers.Delimited.prototype,i.Parsers.prototype,{parse:function(t){var i=[],n={},s={},r=function(t){s[t]||(s[t]=0);var e=t+s[t];return s[t]+=1,e},o=function(t,s,o,a,u){function h(t){var s=t[1];if(s.length&&s!==o){if(p++,l-1>f)throw p--,new Error("Not enough items in row");d=!0,f=0}else d||l++,f++;var a=null;if(a=t[2]?t[2].replace(new RegExp('""',"g"),'"'):t[3],d){if(""===a&&(a=u),"undefined"==typeof n[i[f]])throw new Error("Too many items in row");n[i[f]].push(a)}else{var h=function(t){for(var e=r(t);-1!==i.indexOf(e);)e=r(t);return e};(e.isUndefined(a)||""===a)&&(a="X"),-1!==i.indexOf(a)&&(a=h(a)),i.push(a),n[a]=[]}}o=o||",";var c=null,l=0,d=!1,f=-1,p=0;try{if(s=s.replace(/\s+$/,"").replace(/^[\r|\n|\s]+[\r|\n]/,"\n"),a>0){for(var m=0,y=0,v=s.length;a>m&&v>y;)/\n|\r|\r\n/.test(s.charAt(y))&&m++,y++;s=s.slice(y,v)}for(new RegExp("^"+o).test(s)&&h(["","",void 0,""]);c=t.exec(s);)h(c)}catch(_){throw new Error("Error while parsing delimited data on row "+p+". Message: "+_.message)}return{columns:i,data:n}};return o(this.__delimiterPatterns,t,this.delimiter,this.skipRows,this.emptyValue)}})}(this,_),function(t,e){var i=t.Miso||(t.Miso={}),n=i.Dataset;n.Derived=function(t){t=t||{},n.call(this),this.parent=t.parent,this.idAttribute="_id",this.method=t.method,this._addIdColumn(),this.addColumn({name:"_oids",type:"mixed"}),this.parent.syncable&&(e.extend(this,i.Events),this.syncable=!0,this.parent.subscribe("change",this._sync,{context:this}))},n.Derived.prototype=new n,e.extend(n.Derived.prototype,{_sync:function(){this.func.call(this.args),this.publish("change")}}),e.extend(n.DataView.prototype,{movingAverage:function(t,i,s){s=s||{};var r=new n.Derived({parent:this,method:s.method||e.mean,size:i,args:arguments});this.eachColumn(function(t){if(t===this.idAttribute)throw"You can't compute a moving average on the id column";r.addColumn({name:t,type:this.column(t).type,data:[]})},this),n.Builder.cacheColumns(r);var o=function(){"string"==typeof t&&(t=[t]),this.column(this.idAttribute).data=this.parent.column(this.parent.idAttribute).data.slice(i-1,this.parent.length),this.eachColumn(function(n,s){-1===t.indexOf(n)&&"_oids"!==n?s.data=this.parent.column(n).data.slice(i-1,this.parent.length):s.data=e.movingAvg(this.parent.column(n).data,i,this.method)},this),this.length=this.parent.length-i+1;var s=this.column("_oids");s.data=[];for(var r=0;r<this.length;r++)s.data.push(this.parent.column(this.parent.idAttribute).data.slice(r,r+i));return n.Builder.cacheRows(this),this};return r.func=e.bind(o,r),r.func.call(r.args)},countBy:function(t,i){function s(t,e,i){var s;for(s=0;s<t.length;s++)if(0===n.types[i].compare(t[s],e))return s;return-1}i=i||{};var r=new n.Derived({parent:this,method:e.sum,args:arguments}),o=this.column(t);r.addColumn({name:t,type:o.type}),r.addColumn({name:"count",type:"number"}),r.addColumn({name:"_oids",type:"mixed"}),n.Builder.cacheColumns(r);var a=r.column(t).data,u=r.column("count").data,h=r.column("_oids").data,c=r.column(r.idAttribute).data;return this.each(function(i){var n=s(a,i[t],o.type);-1===n?(a.push(i[t]),c.push(e.uniqueId()),u.push(1),h.push([i[this.parent.idAttribute]])):(u[n]+=1,h[n].push(i[this.parent.idAttribute]))},r),n.Builder.cacheRows(r),r},groupBy:function(t,i,s){s=s||{};var r=new n.Derived({parent:this,method:s.method||e.sum,args:arguments});s&&s.preprocess&&(r.preprocess=s.preprocess);var o=e.union([t],i);e.each(o,function(t){this.addColumn({name:t,type:this.parent.column(t).type})},r),n.Builder.cacheColumns(r);var a=function(){var s=this;n.Builder.clearRowCache(this);for(var r={},o=0,a=this.parent.column(t),u=0;u<this.parent.length;u++){var h=null;h=this.preprocess?this.preprocess(a.data[u]):a.data[u],e.isUndefined(r[h])&&(r[h]=o,e.each(i,function(t){var i=this.column(t),n=this.column(this.idAttribute);i.data[o]=[],n.data[o]=e.uniqueId()},this),this.column(t).data[o]=h,o++),e.each(i,function(t){var e=this.column(t),i=r[h];e.data[i].push(this.parent.rowByPosition(u))},this)}var c=this._columns[this._columnPositionByName._oids];return c.data=[],e.each(i,function(t){var i=this.column(t);e.each(i.data,function(n,r){e.isArray(n)&&(c.data[r]=c.data[r]||[],c.data[r].push(e.map(n,function(t){return t[s.parent.idAttribute]})),c.data[r]=e.flatten(c.data[r]),i.data[r]=this.method(e.map(n,function(e){return e[t]})),this.length++)},this)},this),n.Builder.cacheRows(this),this};return r.func=e.bind(a,r),r.func.call(r.args)}})}(this,_);